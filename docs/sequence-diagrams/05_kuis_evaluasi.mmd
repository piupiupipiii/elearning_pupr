sequenceDiagram
    autonumber
    
    actor U as Pengguna
    participant B as Halaman Quiz
    participant C as QuizController
    participant Q as Question
    participant A as UserAnswer
    participant S as QuizScore
    participant P as UserProgress

    U->>B: Mengakses halaman quiz
    B->>C: show(materialId)
    C->>Q: getRandomQuestions(materialId, 2)
    Q-->>C: 2 soal acak
    C-->>B: render halaman quiz
    B-->>U: Menampilkan soal pertama
    
    loop Untuk setiap soal
        U->>B: Memilih jawaban
        B->>C: validateAnswer(questionId, answer)
        C->>Q: checkCorrectAnswer(questionId)
        Q-->>C: jawaban benar/salah
        C-->>B: return feedback
        B-->>U: Menampilkan feedback visual
    end
    
    U->>B: Submit quiz
    B->>C: submit(answers)
    C->>A: saveAnswers(userId, answers)
    A-->>C: answers saved
    C->>C: calculateScore()
    C->>S: saveScore(userId, materialId, score)
    S-->>C: score saved
    C->>P: updateProgress(status = done)
    P-->>C: progress updated
    C->>P: unlockNextMaterial()
    P-->>C: next material unlocked
    C-->>B: redirect ke sub menu
    B-->>U: Menampilkan sub menu dengan materi baru terbuka
